$(document).ready((function(){const distance_allowed=25000;"geolocation"in navigator?(navigator.permissions.query({name:"geolocation"}).then((function(o){"prompt"===o.state&&$("#activate_location_modal").modal("show"),o.onchange=function(){$("#activate_location_modal").modal("hide")}})),navigator.geolocation.getCurrentPosition((o=>{const a=function(o,a,e,t){const n=(e-o)*(Math.PI/180),r=(t- -83.923306)*(Math.PI/180),i=Math.sin(n/2)**2+Math.cos(o*(Math.PI/180))*Math.cos(e*(Math.PI/180))*Math.sin(r/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}(9.879722,0,o.coords.latitude,o.coords.longitude);if(a<=distance_allowed)"activate_key_action","granted",$.ajax({url:location.href,type:"POST",data:{action_type:"activate_key_action",geo_permission_state:"granted"},success:function(o){$("#main_content").html(o)},error:function(){console.error("Error al enviar datos al servidor."),alert("Error al cargar el modulo, inténtelo de nuevo"),location.href="profesor"}});else{const o=(a-distance_allowed).toFixed(0);$("#no_near_mts").html(o),$("#no_near_coordinacion").modal("show")}}),(o=>{switch(o.code){case o.PERMISSION_DENIED:console.error("Permiso denegado para geolocalización."),$("#no_location").modal("show");break;case o.POSITION_UNAVAILABLE:console.error("La información de ubicación no está disponible."),alert("No se pudo obtener la ubicación. Inténtelo de nuevo, acceda desde otro navegador o ingrese más tarde."),location.href="profesor";break;case o.TIMEOUT:console.error("La solicitud de ubicación ha tardado demasiado."),alert("La solicitud de ubicación tardó demasiado. Inténtalo de nuevo."),location.href="profesor";break;default:console.error("Error desconocido:",o.message),alert("Ocurrió un error al obtener la ubicación."),location.href="profesor"}}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):(alert("La geolocalización no es compatible con este navegador."),location.href="profesor")}));